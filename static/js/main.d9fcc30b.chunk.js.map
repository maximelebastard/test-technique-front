{"version":3,"sources":["components/details/Overview.module.scss","components/grid/Grid.module.scss","components/details/RatingText.module.scss","components/thumbnail/Thumbnail.module.scss","components/details/Details.module.scss","components/welcome/Welcome.module.scss","components/details/Related.module.scss","components/header/Header.module.scss","components/filter/Filter.module.scss","poster-placeholder.jpg","components/error/Error.module.scss","components/welcome/undraw_may_the_force.svg","domain/MoviesSlice.tsx","domain/MoviesDetailsSlice.tsx","domain/UserSlice.tsx","domain/GridSlice.tsx","domain/types.ts","api/theMovieDb.ts","domain/MoviesSaga.tsx","domain/MoviesDetailsSaga.tsx","domain/UserSaga.tsx","store.ts","components/thumbnail/Thumbnail.tsx","components/details/icon-star-empty.svg","components/details/icon-star-full.svg","components/details/RatingText.tsx","components/details/Overview.tsx","components/details/Overview.connected.tsx","components/details/Related.tsx","components/details/Related.connected.tsx","components/details/Details.tsx","components/grid/Item.tsx","components/grid/ItemPlaceholder.tsx","components/grid/Grid.tsx","components/grid/Grid.connected.tsx","components/header/Header.tsx","components/error/Error.tsx","components/error/Error.connected.tsx","components/filter/Filter.tsx","components/filter/Filter.connected.tsx","components/welcome/Welcome.tsx","components/welcome/Welcome.connected.tsx","App.tsx","index.tsx"],"names":["module","exports","slice","createSlice","name","initialState","selectedFilter","currentPage","isConfigFetching","areMoviesFetching","movies","reducers","initRequest","fetchConfigRequest","state","fetchError","undefined","theMovieDbConfig","fetchConfigSuccess","action","payload","fetchConfigError","fetchMoviesRequest","fetchMoviesSuccess","posterBaseUrl","stateMovies","page","totalPages","reduce","accumulator","movie","currentIndex","id","poster","posterPlaceholder","indexInPage","fetchMoviesError","setFilter","nextPage","actions","moviesDetails","fetchingMoviesIds","fetchMovieDetailsRequest","fetchMovieDetailsSuccess","directors","genres","rating","totalRatings","userRating","related","synopsis","inWatchlist","fetchMovieDetailsError","error","addWatchlistRequest","addWatchlistSuccess","addWatchlistError","removeWatchlistRequest","removeWatchlistSuccess","removeWatchlistError","ratingRequest","ratingSuccess","ratingError","localStorageSessionId","window","localStorage","getItem","localStorageAccountId","isRequestTokenFetching","isSessionIdFetching","isAccountIdFetching","sessionId","accountId","setRequestToken","requestToken","fetchRequestTokenRequest","fetchRequestTokenSuccess","fetchRequestTokenError","fetchSessionIdRequest","fetchSessionIdSuccess","fetchSessionIdError","fetchAccountIdRequest","fetchAccountIdSuccess","fetchAccountIdError","showMovieDetails","selectedMovieId","ApiError","Error","API_KEY","withCache","key","callback","a","lscache","supported","console","warn","flushExpired","cached","get","debug","JSON","parse","live","set","stringify","authRequestToken","fetch","res","status","json","authSession","params","method","headers","body","request_token","fetchAccount","fetchConfig","fetchPopularMovies","fetchLatestMovies","today","Date","toISOString","split","fetchWatchlistMovies","fetchMovie","fetchAccountState","movieId","rateMovie","value","addToWatchlist","media_type","media_id","watchlist","fetchMovies","initializeApp","handleFilterChange","fetchNextPage","MoviesSaga","call","Api","data","put","MoviesSlice","images","secure_base_url","poster_sizes","select","user","endpointFromFilter","popular","latest","results","map","result","title","poster_path","total_pages","toString","take","type","takeLatest","fetchMovieDetails","removeFromWatchlist","handleShowDetails","MoviesDetailsSaga","all","credits","crew","filter","crewMember","job","MoviesDetailsSlice","length","genre","overview","vote_average","vote_count","rated","recommendations","reco","takeEvery","GridSlice","fetchRequestToken","fetchSessionId","fetchAccountId","storeSessionId","storeAccountId","UserSaga","UserSlice","success","session_id","setItem","sagaMiddleware","createSagaMiddleware","history","createHashHistory","rootReducer","combineReducers","router","connectRouter","userReducer","moviesReducer","moviesDetailsReducer","grid","gridReducer","store","configureStore","devTools","process","reducer","middleware","routerMiddleware","run","moviesSaga","moviesDetailsSaga","userSaga","Thumbnail","React","forwardRef","props","ref","selected","posterUrl","onClick","className","styles","MovieItem","join","crossOrigin","alt","src","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref3","d","_ref","svgRef","viewBox","ForwardRef","RatingText","label","initialRating","readonly","emptySymbol","star","fullSymbol","fractions","stop","scale","onChange","rate","onRated","text","Overview","onAddToWatchlist","onRemoveFromWatchlist","onRating","columnLeft","ratings","OverviewConnected","dispatch","useDispatch","movieDetails","useSelector","Related","item","RelatedConnected","Details","onTabChange","useState","selectedIndex","setSelectedIndex","useEffect","onSelect","tabIndex","tabList","selectedClassName","tabSelected","GridItem","showDetails","onMovieSelected","detailsRef","createRef","itemRef","extendDetails","current","paddingBottom","offsetHeight","style","detailsWrapper","ItemPlaceholder","speed","width","height","backgroundColor","foregroundColor","x","y","rx","ry","Grid","initializing","moviesFetching","onNextPage","onItemSelected","onScroll","innerHeight","scrollY","document","addEventListener","passive","removeEventListener","values","Item","GridConnected","sortedMovies","sort","b","Header","logo","ErrorConnected","moviesFetchError","moviesDetailsFetchError","Filter","e","FilterConnected","Welcome","MayTheForce","mayTheForce","content","disabled","currentUrl","WelcomeConnected","query","URLSearchParams","useLocation","search","to","location","href","App","exact","path","Component","connect","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d9fcc30b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overview\":\"Overview_Overview__39CVS\",\"columnLeft\":\"Overview_columnLeft__3whpv\",\"addToWatchlist\":\"Overview_addToWatchlist__2LkNz\",\"title\":\"Overview_title__1wVYS\",\"poster\":\"Overview_poster__1TLqf\",\"ratings\":\"Overview_ratings__1PCV3\",\"rating\":\"Overview_rating__Ar-it\",\"synopsis\":\"Overview_synopsis__2nx1V\",\"fadeIn\":\"Overview_fadeIn__3U0jE\",\"slideDown\":\"Overview_slideDown__3diuo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Grid\":\"Grid_Grid__2WWqF\",\"item\":\"Grid_item__hF-2y\",\"detailsWrapper\":\"Grid_detailsWrapper__38d_n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"RatingText\":\"RatingText_RatingText__3F5ab\",\"label\":\"RatingText_label__62lX1\",\"star\":\"RatingText_star__2m0GY\",\"text\":\"RatingText_text__2Y1UF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MovieItem\":\"Thumbnail_MovieItem__kTglR\",\"poster\":\"Thumbnail_poster__12bxs\",\"title\":\"Thumbnail_title__1CPFJ\",\"directors\":\"Thumbnail_directors__3n8GL\",\"rating\":\"Thumbnail_rating__e4wvl\",\"selected\":\"Thumbnail_selected__MgRGp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Details\":\"Details_Details__1I0LT\",\"fadeIn\":\"Details_fadeIn__2V6Nb\",\"slideDown\":\"Details_slideDown__1d16F\",\"tabList\":\"Details_tabList__1Adnr\",\"tabSelected\":\"Details_tabSelected__2R7Y3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Welcome\":\"Welcome_Welcome__2kudU\",\"content\":\"Welcome_content__1aNhG\",\"mayTheForce\":\"Welcome_mayTheForce__2xe0l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Related\":\"Related_Related__1UAh8\",\"item\":\"Related_item__3n4WC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__214zg\",\"logo\":\"Header_logo__2gAbO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Filter\":\"Filter_Filter__2WXGu\",\"select\":\"Filter_select__DEwJI\"};","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAvqADAAQAAAABAAABGgAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgBGgC+AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAgEBAgMCAgIDBAMDAwMEBQQEBAQEBQYFBQUFBQUGBgYGBgYGBgcHBwcHBwgICAgICQkJCQkJCQkJCf/bAEMBAQEBAgICBAICBAkGBQYJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCf/dAAQADP/aAAwDAQACEQMRAD8A/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//Q/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//R/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//S/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//T/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//U/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//V/wA/+iiigAooooAKKKKACiiigAooooAKKKu2GnX2qXAtdPiaaQ/wqM8ep9B7mgClRXT6j4N8T6Vbm6vrN1jHJZSGAHvtJx+NcxQAUUUUAFFFFABRRRQAUUUUAFFFFAH/1v8AP/ooooAKKKKACiiigAooooAKKKKAHKrOwRBkk4AHrX1d4J8NR+G9GSJ1H2mUB5m757L9F6fXJryL4XeHV1PVG1e5GYrQjaD3kPT/AL56/XFfRtAAQCMGvl/4h+GR4f1jz7Vdtrc5ZAOit/Ev9R7H2r6grnfFWgxeI9Fl05sCT70bHs46fn0PsaAPkGipZ4ZbaZ7edSrxkqwPUEcEVFQAUUUUAFFFFABRRRQAUUUUAf/X/wA/+iiigAooooAKKKKACiiigAooooA93+EGqWwtbnRnIEu/zVB/iBABx9MfrXtNfEkE89tMtxbO0ciHKspwQfYiuwj+IvjKJAi3pIHqkZP5lSaAPquivlf/AIWR40/5/P8AyHH/APE0f8LI8af8/n/kOP8A+JoA6z4reGvs9yviK0X5JiEmA7N2b8Rwff6143XW33jrxTqdpJYX1yJIpRhlMcfI/Bc1yVABRRRQAUUUUAFFFFABRRRQB//Q/wA/+iiigAooooAKKKKACiiigB8bmKRZAASpBwQCOPUHgivqbw7Z+E/EOkQ6nDp1qC4w6+UnyuOo6fl7V8rV6X8NPEv9j6v/AGbcti3uyF56K/8ACfx6H8PSgD3n/hGPDX/QOtv+/Sf4Uf8ACMeGv+gdbf8AfpP8K3KKAOXvvBXha/gMEllFHkfeiUIw9wVxXzP4n0GXw5rMumO29VwyN/eU9D9ex9xX2BXy78SdUg1TxRJ9nO5bdBDkdypJP5EkfhQBwNFFFABRRRQAUUUUAFFFFABRRRQB/9H/AD/6KKKACiiigAooooAKKKKACgHHIoooA+qPAXiT/hItEXz2zc2+El9T6N+I/XNdxXx94c8RX3hrURqFlhuNroejL6H+hr2P/hcOkfZ932Sbzcfdyu3P+9nP/jtAHU+O/Eg8OaIzwti5nykXqD3b/gI/XFfKpJJyeprf8SeI77xNqBvrzCgDaiDoq+n+Jrn6ACiiigAooooAKKKKACiiigAooooA/9L/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9P/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9T/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9X/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9b/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9f/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9D/AD/6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9k=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Error\":\"Error_Error__1uieS\"};","module.exports = __webpack_public_path__ + \"static/media/undraw_may_the_force.beae07eb.svg\";","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { TheMovieDbConfig, Movie, Paginated, Filter } from \"./types\";\nimport posterPlaceholder from \"../poster-placeholder.jpg\";\n\n/**\n * Slice related to the movies data\n */\n\ninterface State {\n  isConfigFetching: boolean;\n  theMovieDbConfig?: TheMovieDbConfig;\n  selectedFilter: Filter;\n  areMoviesFetching: boolean;\n  movies: { [id: string]: Paginated<Movie> };\n  currentPage: number;\n  totalPages?: number;\n  fetchError?: string;\n}\n\nexport const initialState: State = {\n  selectedFilter: \"popular\",\n  currentPage: 1,\n  isConfigFetching: false,\n  areMoviesFetching: false,\n  movies: {}\n};\n\nexport type PFetchMoviesSuccess = {\n  movies: Movie[];\n  page: number;\n  totalPages: number;\n};\n\nexport const slice = createSlice({\n  name: \"movies\",\n  initialState,\n  reducers: {\n    initRequest: () => {\n      // see how DataSaga handles it\n    },\n    fetchConfigRequest: state => {\n      state.isConfigFetching = true;\n      state.fetchError = undefined;\n      state.theMovieDbConfig = undefined;\n    },\n    fetchConfigSuccess: (state, action: PayloadAction<TheMovieDbConfig>) => {\n      state.isConfigFetching = false;\n      state.theMovieDbConfig = action.payload;\n    },\n    fetchConfigError: (state, action: PayloadAction<string>) => {\n      state.isConfigFetching = false;\n      state.fetchError = action.payload;\n    },\n    fetchMoviesRequest: state => {\n      state.areMoviesFetching = true;\n      state.fetchError = undefined;\n    },\n    fetchMoviesSuccess: (state, action: PayloadAction<PFetchMoviesSuccess>) => {\n      const { movies: stateMovies, page, totalPages } = action.payload;\n      let posterBaseUrl: string;\n      if (state.theMovieDbConfig) {\n        posterBaseUrl = state.theMovieDbConfig.posterBaseUrl;\n      }\n      state.areMoviesFetching = false;\n      state.totalPages = totalPages;\n      const movies = stateMovies.reduce<{ [id: string]: Paginated<Movie> }>(\n        (accumulator, movie, currentIndex) => ({\n          ...accumulator,\n          [movie.id]: {\n            ...movie,\n            poster:\n              posterBaseUrl && movie.poster\n                ? `${posterBaseUrl}${movie.poster}`\n                : posterPlaceholder,\n            page,\n            indexInPage: currentIndex\n          }\n        }),\n        {}\n      );\n      state.movies = { ...state.movies, ...movies };\n    },\n    fetchMoviesError: (state, action: PayloadAction<string>) => {\n      state.areMoviesFetching = false;\n      state.fetchError = action.payload;\n    },\n    setFilter: (state, action: PayloadAction<Filter>) => {\n      state.selectedFilter = action.payload;\n      state.movies = {};\n      state.currentPage = 1;\n    },\n    nextPage: state => {\n      state.currentPage += 1;\n    }\n  }\n});\n\nexport const {\n  initRequest,\n  fetchConfigRequest,\n  fetchConfigSuccess,\n  fetchConfigError,\n  fetchMoviesRequest,\n  fetchMoviesSuccess,\n  fetchMoviesError,\n  setFilter,\n  nextPage\n} = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Movie, MovieDetails } from \"./types\";\n\n/**\n * Slice related to the movies details data\n */\n\ninterface State {\n  isConfigFetching: boolean;\n  moviesDetails: { [id: string]: MovieDetails };\n  fetchingMoviesIds: { [id: string]: boolean };\n  fetchError?: string;\n}\n\nexport const initialState: State = {\n  isConfigFetching: false,\n  moviesDetails: {},\n  fetchingMoviesIds: {}\n};\n\nexport type PFetchMovieDetailsRequest = {\n  id: string;\n};\nexport type PFetchMovieDetailsSuccess = {\n  id: string;\n  genres: string[];\n  directors: string[];\n  rating: number;\n  totalRatings: number;\n  userRating?: number;\n  synopsis: string;\n  related: Movie[];\n  inWatchlist: boolean;\n};\nexport type PFetchMovieDetailsError = PFetchMovieDetailsRequest & {\n  error: string;\n};\n\nexport type PAddWatchlist = {\n  id: string;\n};\nexport type PAddWatchlistError = PAddWatchlist & {\n  error: string;\n};\n\nexport type PRateMovie = {\n  id: string;\n  rating: number;\n};\nexport type PRateMovieError = PRateMovie & {\n  error: string;\n};\n\nexport const slice = createSlice({\n  name: \"movies_details\",\n  initialState,\n  reducers: {\n    fetchMovieDetailsRequest: (\n      state,\n      action: PayloadAction<PFetchMovieDetailsRequest>\n    ) => {\n      state.fetchingMoviesIds[action.payload.id] = true;\n      state.fetchError = undefined;\n    },\n    fetchMovieDetailsSuccess: (\n      state,\n      action: PayloadAction<PFetchMovieDetailsSuccess>\n    ) => {\n      delete state.fetchingMoviesIds[action.payload.id];\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        directors: action.payload.directors,\n        genres: action.payload.genres,\n        rating: action.payload.rating,\n        totalRatings: action.payload.totalRatings,\n        userRating: action.payload.userRating,\n        related: action.payload.related,\n        synopsis: action.payload.synopsis,\n        inWatchlist: action.payload.inWatchlist\n      };\n      state.fetchError = undefined;\n    },\n    fetchMovieDetailsError: (\n      state,\n      action: PayloadAction<PFetchMovieDetailsError>\n    ) => {\n      delete state.fetchingMoviesIds[action.payload.id];\n      state.fetchError = action.payload.error;\n    },\n    addWatchlistRequest: (state, action: PayloadAction<PAddWatchlist>) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        inWatchlist: true\n      };\n      state.fetchError = undefined;\n    },\n    addWatchlistSuccess: state => {\n      state.fetchError = undefined;\n    },\n    addWatchlistError: (state, action: PayloadAction<PAddWatchlistError>) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        inWatchlist: false\n      };\n      state.fetchError = action.payload.error;\n    },\n    removeWatchlistRequest: (state, action: PayloadAction<PAddWatchlist>) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        inWatchlist: false\n      };\n      state.fetchError = undefined;\n    },\n    removeWatchlistSuccess: state => {\n      state.fetchError = undefined;\n    },\n    removeWatchlistError: (\n      state,\n      action: PayloadAction<PAddWatchlistError>\n    ) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        inWatchlist: true\n      };\n      state.fetchError = action.payload.error;\n    },\n    ratingRequest: (state, action: PayloadAction<PRateMovie>) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        userRating: action.payload.rating\n      };\n      state.fetchError = undefined;\n    },\n    ratingSuccess: (state, action: PayloadAction<PRateMovie>) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        userRating: action.payload.rating\n      };\n      state.fetchError = undefined;\n    },\n    ratingError: (state, action: PayloadAction<PRateMovieError>) => {\n      state.moviesDetails[action.payload.id] = {\n        ...state.moviesDetails[action.payload.id],\n        userRating: undefined\n      };\n      state.fetchError = action.payload.error;\n    }\n  }\n});\n\nexport const {\n  fetchMovieDetailsRequest,\n  fetchMovieDetailsSuccess,\n  fetchMovieDetailsError,\n  addWatchlistRequest,\n  addWatchlistSuccess,\n  addWatchlistError,\n  removeWatchlistRequest,\n  removeWatchlistSuccess,\n  removeWatchlistError,\n  ratingRequest,\n  ratingSuccess,\n  ratingError\n} = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\n/**\n * Slice related to the user authentication\n */\n\ninterface State {\n  isRequestTokenFetching: boolean;\n  isSessionIdFetching: boolean;\n  isAccountIdFetching: boolean;\n  requestToken?: string;\n  sessionId?: string;\n  accountId?: string;\n  fetchError?: string;\n}\n\nexport const initialState = (): State => {\n  const localStorageSessionId = window.localStorage.getItem(\"tmdb_session\");\n  const localStorageAccountId = window.localStorage.getItem(\"tmdb_account\");\n  return {\n    isRequestTokenFetching: false,\n    isSessionIdFetching: false,\n    isAccountIdFetching: false,\n    sessionId: localStorageSessionId ? localStorageSessionId : undefined,\n    accountId: localStorageAccountId ? localStorageAccountId : undefined\n  };\n};\n\nexport const slice = createSlice({\n  name: \"user\",\n  initialState: initialState(),\n  reducers: {\n    setRequestToken: (state, action: PayloadAction<string>) => {\n      state.requestToken = action.payload;\n    },\n    fetchRequestTokenRequest: state => {\n      state.isRequestTokenFetching = true;\n      state.fetchError = undefined;\n      state.requestToken = undefined;\n    },\n    fetchRequestTokenSuccess: (state, action: PayloadAction<string>) => {\n      state.isRequestTokenFetching = false;\n      state.requestToken = action.payload;\n    },\n    fetchRequestTokenError: (state, action: PayloadAction<string>) => {\n      state.isRequestTokenFetching = false;\n      state.fetchError = action.payload;\n    },\n    fetchSessionIdRequest: state => {\n      state.isSessionIdFetching = true;\n      state.fetchError = undefined;\n      state.sessionId = undefined;\n    },\n    fetchSessionIdSuccess: (state, action: PayloadAction<string>) => {\n      state.isSessionIdFetching = false;\n      state.sessionId = action.payload;\n    },\n    fetchSessionIdError: (state, action: PayloadAction<string>) => {\n      state.isSessionIdFetching = false;\n      state.fetchError = action.payload;\n    },\n    fetchAccountIdRequest: state => {\n      state.isAccountIdFetching = true;\n      state.fetchError = undefined;\n      state.accountId = undefined;\n    },\n    fetchAccountIdSuccess: (state, action: PayloadAction<string>) => {\n      state.isAccountIdFetching = false;\n      state.accountId = action.payload;\n    },\n    fetchAccountIdError: (state, action: PayloadAction<string>) => {\n      state.isAccountIdFetching = false;\n      state.fetchError = action.payload;\n    }\n  }\n});\n\nexport const {\n  setRequestToken,\n  fetchRequestTokenRequest,\n  fetchRequestTokenSuccess,\n  fetchRequestTokenError,\n  fetchSessionIdRequest,\n  fetchSessionIdSuccess,\n  fetchSessionIdError,\n  fetchAccountIdRequest,\n  fetchAccountIdSuccess,\n  fetchAccountIdError\n} = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\n/**\n * Slice related to the actions performed on the grid\n */\n\ninterface State {\n  selectedMovieId?: string;\n}\n\nexport const initialState: State = {};\nexport const slice = createSlice({\n  name: \"grid\",\n  initialState,\n  reducers: {\n    showMovieDetails: (state, action: PayloadAction<string | undefined>) => {\n      state.selectedMovieId = action.payload;\n    }\n  }\n});\n\nexport const { showMovieDetails } = slice.actions;\n\nexport default slice.reducer;\n","export class ApiError extends Error {}\n\nexport type Filter = \"popular\" | \"latest\" | \"watchlist\";\n\nexport interface Movie {\n  id: string;\n  title: string;\n  poster?: string;\n}\n\nexport interface MovieDetails {\n  id: string;\n  genres?: string[];\n  directors?: string[];\n  rating?: number;\n  totalRatings?: number;\n  userRating?: number;\n  synopsis?: string;\n  related?: Movie[];\n  inWatchlist?: boolean;\n}\n\nexport interface TheMovieDbConfig {\n  posterBaseUrl: string;\n}\n\nexport type Paginated<T> = T & {\n  page: number;\n  indexInPage: number;\n};\n","import lscache from \"lscache\";\nimport { ApiError } from \"../domain/types\";\n\nconst API_KEY = \"962c182f72ce8d2c665cf08a1dc13394\";\nconst CACHE_TTL_IN_MS = 3600000; // 1 hour\n\n/**\n * Wraps an API result in a cache\n * @param key A unique key for cache\n * @param callback A Callback to compute the data\n */\nasync function withCache(key: string, callback: () => object) {\n  if (!lscache.supported()) {\n    console.warn(\"Local storage cache is not supported\");\n    return await callback();\n  }\n\n  lscache.flushExpired();\n\n  const cached = lscache.get(key);\n  if (cached) {\n    console.debug(`Using cache for key ${key}`);\n    return JSON.parse(cached);\n  }\n\n  const live = await callback();\n  lscache.set(key, JSON.stringify(live), CACHE_TTL_IN_MS);\n  return live;\n}\n\n/**\n * Authentication. Fetches a Request Token\n * @see https://developers.themoviedb.org/3/authentication/create-request-token\n */\nexport async function authRequestToken() {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/authentication/token/new?api_key=${API_KEY}`\n  );\n  if (res.status !== 200) {\n    throw new ApiError(\"Invalid status\");\n  }\n  return res.json();\n}\n\ntype AuthSessionParams = {\n  requestToken: string;\n};\n/**\n * Authentication. Fetches a Session ID.\n * @see https://developers.themoviedb.org/3/authentication/create-session\n * @param params\n */\nexport async function authSession(params: AuthSessionParams) {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/authentication/session/new?api_key=${API_KEY}`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      },\n      body: JSON.stringify({\n        request_token: params.requestToken // eslint-disable-line\n      })\n    }\n  );\n  if (res.status !== 200) {\n    throw new ApiError(\"Invalid status\");\n  }\n  return res.json();\n}\n\ntype FetchAccountParams = {\n  sessionId: string;\n};\n/**\n * Authentication. Fetches account data.\n * @see https://developers.themoviedb.org/3/account/get-account-details\n * @param params\n */\nexport async function fetchAccount(params: FetchAccountParams) {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/account?api_key=${API_KEY}&session_id=${params.sessionId}`\n  );\n  if (res.status !== 200) {\n    throw new ApiError(\"Invalid status\");\n  }\n  return res.json();\n}\n\n/**\n * Fetches the Movie DB latest configuration set.\n * @see https://developers.themoviedb.org/3/configuration/get-api-configuration\n * @param params\n */\nexport async function fetchConfig() {\n  return withCache(\"themoviedb_config\", async () => {\n    const res = await fetch(\n      `https://api.themoviedb.org/3/configuration?api_key=${API_KEY}`\n    );\n    if (res.status !== 200) {\n      throw new ApiError(\"Invalid status\");\n    }\n    return res.json();\n  });\n}\n\nexport type FetchMoviesParams = {\n  accountId: string;\n  sessionId: string;\n  page: number;\n};\n/**\n * Fetches the most popular movies of the week.\n * @see https://developers.themoviedb.org/3/trending/get-trending\n * @param params\n */\nexport async function fetchPopularMovies(params: FetchMoviesParams) {\n  return withCache(`popular_page${params.page}`, async () => {\n    const res = await fetch(\n      `https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&page=${params.page}&per_page=15`\n    );\n    if (res.status !== 200) {\n      throw new ApiError(\"Invalid status\");\n    }\n    return res.json();\n  });\n}\n\n/**\n * Fetches the lastest movies released.\n * @see https://developers.themoviedb.org/3/discover/movie-discover\n * @param params\n */\nexport async function fetchLatestMovies(params: FetchMoviesParams) {\n  return withCache(`latest_page${params.page}`, async () => {\n    const today = new Date().toISOString().split(\"T\")[0];\n    const res = await fetch(\n      `https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&sort_by=release_date.desc&release_date.lte=${today}&page=${params.page}&per_page=15`\n    );\n    if (res.status !== 200) {\n      throw new ApiError(\"Invalid status\");\n    }\n    return res.json();\n  });\n}\n\n/**\n * Fetches the movies in the user watchlist\n * @see https://developers.themoviedb.org/3/account/get-movie-watchlist\n * @param params\n */\nexport async function fetchWatchlistMovies(params: FetchMoviesParams) {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/account/${params.accountId}/watchlist/movies?api_key=${API_KEY}&session_id=${params.sessionId}&page=${params.page}&per_page=15`\n  );\n  if (res.status !== 200) {\n    throw new ApiError(\"Invalid status\");\n  }\n  return res.json();\n}\n\ntype FetchMovieParams = {\n  id: string;\n};\n/**\n * Fetches one movie detailed data.\n * @see https://developers.themoviedb.org/3/movies/get-movie-details\n * @param params\n */\nexport async function fetchMovie(params: FetchMovieParams) {\n  return withCache(`movie_details_${params.id}`, async () => {\n    const res = await fetch(\n      `https://api.themoviedb.org/3/movie/${params.id}?api_key=${API_KEY}&append_to_response=credits,recommendations`\n    );\n    return res.json();\n  });\n}\n\ntype FetchAccountStateParams = {\n  sessionId: string;\n  movieId: string;\n};\n/**\n * Fetches the Account State of a movie. It is the user specific data linked to a movie (rating, watchlist, etc.)\n * @see https://developers.themoviedb.org/3/movies/get-movie-account-states\n * @param params\n */\nexport async function fetchAccountState(params: FetchAccountStateParams) {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/movie/${params.movieId}/account_states?api_key=${API_KEY}&session_id=${params.sessionId}`\n  );\n  return res.json();\n}\n\ntype RateMovieParams = {\n  sessionId: string;\n  movieId: string;\n  rating: number;\n};\n/**\n * Gives the user rate for a movie.\n * @see https://developers.themoviedb.org/3/movies/rate-movie\n * @param params\n */\nexport async function rateMovie(params: RateMovieParams) {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/movie/${params.movieId}/rating?api_key=${API_KEY}&session_id=${params.sessionId}`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      },\n      body: JSON.stringify({\n        value: params.rating // eslint-disable-line\n      })\n    }\n  );\n  if (res.status !== 201) {\n    throw new ApiError(\"Invalid status\");\n  }\n  return res.json();\n}\n\ntype AddToWatchlistParams = {\n  sessionId: string;\n  accountId: string;\n  movieId: string;\n  inWatchlist: boolean;\n};\n/**\n * Adds a movie in the user watchlist.\n * @see https://developers.themoviedb.org/3/account/add-to-watchlist\n * @param params\n */\nexport async function addToWatchlist(params: AddToWatchlistParams) {\n  const res = await fetch(\n    `https://api.themoviedb.org/3/account/${params.accountId}/watchlist?api_key=${API_KEY}&session_id=${params.sessionId}`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      },\n      body: JSON.stringify({\n        media_type: \"movie\", // eslint-disable-line\n        media_id: params.movieId, // eslint-disable-line\n        watchlist: params.inWatchlist // eslint-disable-line\n      })\n    }\n  );\n  if (res.status !== 201 && res.status !== 200) {\n    throw new ApiError(\"Invalid status\");\n  }\n  return res.json();\n}\n","import { call, put, take, takeLatest, select } from \"redux-saga/effects\";\nimport * as MoviesSlice from \"./MoviesSlice\";\nimport * as Api from \"../api/theMovieDb\";\nimport { RootState } from \"store\";\nimport { Movie, Filter } from \"./types\";\n\nfunction* fetchConfig() {\n  try {\n    const data = yield call(Api.fetchConfig);\n    yield put(\n      MoviesSlice.fetchConfigSuccess({\n        posterBaseUrl: `${data.images.secure_base_url}${data.images.poster_sizes[3]}`\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(MoviesSlice.fetchConfigError(e));\n  }\n}\n\nfunction* fetchMovies() {\n  const page = yield select((state: RootState) => state.movies.currentPage);\n  const selectedFilter: Filter = yield select(\n    (state: RootState) => state.movies.selectedFilter\n  );\n  const { sessionId, accountId } = yield select(\n    (state: RootState) => state.user\n  );\n\n  const endpointFromFilter: {\n    [filter in Filter]: (p: Api.FetchMoviesParams) => Promise<any>;\n  } = {\n    popular: Api.fetchPopularMovies,\n    latest: Api.fetchLatestMovies,\n    watchlist: Api.fetchWatchlistMovies\n  };\n\n  try {\n    const data = yield call(endpointFromFilter[selectedFilter], {\n      page,\n      sessionId,\n      accountId\n    });\n    const movies = data.results.map(\n      (result: any): Movie => ({\n        id: result.id,\n        title: result.title,\n        poster: result.poster_path\n      })\n    );\n    yield put(\n      MoviesSlice.fetchMoviesSuccess({\n        page,\n        movies,\n        totalPages: data.total_pages\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(MoviesSlice.fetchMoviesError(e.toString()));\n  }\n}\n\nfunction* initializeApp() {\n  yield put(MoviesSlice.fetchConfigRequest());\n  yield take(MoviesSlice.fetchConfigSuccess.type);\n  yield put(MoviesSlice.fetchMoviesRequest());\n}\n\nfunction* handleFilterChange() {\n  yield put(MoviesSlice.fetchMoviesRequest());\n}\n\nfunction* fetchNextPage() {\n  yield put(MoviesSlice.fetchMoviesRequest());\n}\n\nfunction* MoviesSaga() {\n  yield takeLatest(MoviesSlice.initRequest.type, initializeApp);\n  yield takeLatest(MoviesSlice.setFilter.type, handleFilterChange);\n  yield takeLatest(MoviesSlice.fetchConfigRequest.type, fetchConfig);\n  yield takeLatest(MoviesSlice.fetchMoviesRequest.type, fetchMovies);\n  yield takeLatest(MoviesSlice.nextPage.type, fetchNextPage);\n}\n\nexport default MoviesSaga;\n","import {\n  call,\n  put,\n  all,\n  takeLatest,\n  takeEvery,\n  select\n} from \"redux-saga/effects\";\nimport { PayloadAction } from \"@reduxjs/toolkit\";\nimport * as MoviesDetailsSlice from \"./MoviesDetailsSlice\";\nimport * as Api from \"../api/theMovieDb\";\nimport { RootState } from \"store\";\nimport * as GridSlice from \"./GridSlice\";\n\nfunction* fetchMovieDetails(\n  action: PayloadAction<MoviesDetailsSlice.PFetchMovieDetailsRequest>\n) {\n  try {\n    const sessionId = yield select((state: RootState) => state.user.sessionId);\n\n    const data = yield all([\n      call(Api.fetchMovie, { id: action.payload.id }),\n      call(Api.fetchAccountState, { movieId: action.payload.id, sessionId })\n    ]);\n\n    const directors = data[0].credits.crew\n      .filter((crewMember: any) => crewMember.job === \"Director\")\n      .map((crewMember: any) => crewMember.name);\n\n    yield put(\n      MoviesDetailsSlice.fetchMovieDetailsSuccess({\n        id: action.payload.id,\n        directors: directors.length > 0 ? directors : undefined,\n        genres:\n          data[0].genres.length > 0\n            ? data[0].genres.map((genre: any) => genre.name)\n            : undefined,\n        synopsis: data[0].overview,\n        rating: data[0].vote_average,\n        totalRatings: data[0].vote_count,\n        userRating: data[1].rated != \"false\" ? data[1].rated.value : undefined,\n        inWatchlist: data[1].watchlist,\n        related: data[0].recommendations.results\n          .slice(0, 5)\n          .map((reco: any) => ({\n            id: reco.id,\n            title: reco.title,\n            poster: reco.poster_path\n          }))\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      MoviesDetailsSlice.fetchMovieDetailsError({\n        id: action.payload.id,\n        error: e.toString()\n      })\n    );\n  }\n}\n\nfunction* rateMovie(action: PayloadAction<MoviesDetailsSlice.PRateMovie>) {\n  try {\n    const sessionId = yield select((state: RootState) => state.user.sessionId);\n\n    yield call(Api.rateMovie, {\n      sessionId,\n      movieId: action.payload.id,\n      rating: action.payload.rating\n    });\n\n    yield put(\n      MoviesDetailsSlice.ratingSuccess({\n        id: action.payload.id,\n        rating: action.payload.rating\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      MoviesDetailsSlice.ratingError({\n        id: action.payload.id,\n        rating: action.payload.rating,\n        error: e.toString()\n      })\n    );\n  }\n}\n\nfunction* addToWatchlist(\n  action: PayloadAction<MoviesDetailsSlice.PAddWatchlist>\n) {\n  try {\n    const { sessionId, accountId } = yield select(\n      (state: RootState) => state.user\n    );\n\n    yield call(Api.addToWatchlist, {\n      sessionId,\n      accountId,\n      movieId: action.payload.id,\n      inWatchlist: true\n    });\n\n    yield put(MoviesDetailsSlice.addWatchlistSuccess());\n  } catch (e) {\n    console.error(e);\n    yield put(\n      MoviesDetailsSlice.addWatchlistError({\n        id: action.payload.id,\n        error: e.toString()\n      })\n    );\n  }\n}\n\nfunction* removeFromWatchlist(\n  action: PayloadAction<MoviesDetailsSlice.PAddWatchlist>\n) {\n  try {\n    const { sessionId, accountId } = yield select(\n      (state: RootState) => state.user\n    );\n\n    yield call(Api.addToWatchlist, {\n      sessionId,\n      accountId,\n      movieId: action.payload.id,\n      inWatchlist: false\n    });\n\n    yield put(MoviesDetailsSlice.removeWatchlistSuccess());\n  } catch (e) {\n    console.error(e);\n    yield put(\n      MoviesDetailsSlice.removeWatchlistError({\n        id: action.payload.id,\n        error: e.toString()\n      })\n    );\n  }\n}\n\nfunction* handleShowDetails(action: PayloadAction<string | undefined>) {\n  if (action.payload) {\n    yield put(\n      MoviesDetailsSlice.fetchMovieDetailsRequest({ id: action.payload })\n    );\n  }\n}\n\nfunction* MoviesDetailsSaga() {\n  yield takeLatest(\n    MoviesDetailsSlice.fetchMovieDetailsRequest.type,\n    fetchMovieDetails\n  );\n  yield takeEvery(GridSlice.showMovieDetails.type, handleShowDetails);\n  yield takeEvery(MoviesDetailsSlice.ratingRequest.type, rateMovie);\n  yield takeEvery(MoviesDetailsSlice.addWatchlistRequest.type, addToWatchlist);\n  yield takeEvery(\n    MoviesDetailsSlice.removeWatchlistRequest.type,\n    removeFromWatchlist\n  );\n}\n\nexport default MoviesDetailsSaga;\n","import { call, put, takeLatest, select } from \"redux-saga/effects\";\nimport { PayloadAction } from \"@reduxjs/toolkit\";\nimport * as Api from \"../api/theMovieDb\";\nimport * as UserSlice from \"./UserSlice\";\nimport { RootState } from \"store\";\n\nfunction* fetchRequestToken() {\n  try {\n    const res = yield call(Api.authRequestToken);\n    yield put(UserSlice.fetchRequestTokenSuccess(res.request_token));\n  } catch (err) {\n    yield put(UserSlice.fetchRequestTokenError(err.toString()));\n  }\n}\n\nfunction* fetchSessionId() {\n  const requestToken = yield select(\n    (state: RootState) => state.user.requestToken\n  );\n  if (!requestToken) return;\n\n  try {\n    const res = yield call(Api.authSession, { requestToken });\n    if (res.success === true) {\n      yield put(UserSlice.fetchSessionIdSuccess(res.session_id));\n    } else {\n      throw Error(\"Unsuccessful session Id fetching\");\n    }\n  } catch (err) {\n    yield put(UserSlice.fetchSessionIdError(err.toString()));\n  }\n}\n\nfunction* fetchAccountId() {\n  const sessionId = yield select((state: RootState) => state.user.sessionId);\n  if (!sessionId) return;\n\n  try {\n    const res = yield call(Api.fetchAccount, { sessionId });\n    yield put(UserSlice.fetchAccountIdSuccess(res.id));\n  } catch (err) {\n    yield put(UserSlice.fetchAccountIdError(err.toString()));\n  }\n}\n\nfunction* storeSessionId(action: PayloadAction<string>) {\n  window.localStorage.setItem(\"tmdb_session\", action.payload);\n}\n\nfunction* storeAccountId(action: PayloadAction<string>) {\n  window.localStorage.setItem(\"tmdb_account\", action.payload);\n}\n\nfunction* UserSaga() {\n  yield takeLatest(UserSlice.fetchRequestTokenRequest.type, fetchRequestToken);\n  yield takeLatest(UserSlice.fetchSessionIdRequest.type, fetchSessionId);\n  yield takeLatest(UserSlice.fetchAccountIdRequest.type, fetchAccountId);\n  yield takeLatest(UserSlice.fetchSessionIdSuccess.type, storeSessionId);\n  yield takeLatest(UserSlice.fetchAccountIdSuccess.type, storeAccountId);\n}\n\nexport default UserSaga;\n","import { configureStore, combineReducers } from \"@reduxjs/toolkit\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { connectRouter, routerMiddleware } from \"connected-react-router\";\nimport { createHashHistory } from \"history\";\nimport moviesReducer from \"./domain/MoviesSlice\";\nimport moviesDetailsReducer from \"./domain/MoviesDetailsSlice\";\nimport userReducer from \"./domain/UserSlice\";\nimport gridReducer from \"./domain/GridSlice\";\nimport moviesSaga from \"./domain/MoviesSaga\";\nimport moviesDetailsSaga from \"./domain/MoviesDetailsSaga\";\nimport userSaga from \"./domain/UserSaga\";\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport const history = createHashHistory();\n\nexport const rootReducer = combineReducers({\n  router: connectRouter(history),\n  user: userReducer,\n  movies: moviesReducer,\n  moviesDetails: moviesDetailsReducer,\n  grid: gridReducer\n});\n\nconst store = configureStore({\n  devTools: process.env.NODE_ENV !== \"production\",\n  reducer: rootReducer,\n  middleware: [sagaMiddleware, routerMiddleware(history)]\n});\n\nsagaMiddleware.run(moviesSaga);\nsagaMiddleware.run(moviesDetailsSaga);\nsagaMiddleware.run(userSaga);\n\nexport type RootState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React from \"react\";\nimport styles from \"./Thumbnail.module.scss\";\n\ntype ThumbnailProps = {\n  title: string;\n  posterUrl?: string;\n  onClick?: () => void;\n  selected: boolean;\n};\n\nconst Thumbnail = React.forwardRef<HTMLDivElement, ThumbnailProps>(\n  function Thumbnail(props, ref) {\n    const { title, selected, posterUrl } = props;\n\n    return (\n      <div\n        ref={ref}\n        onClick={() => props.onClick && props.onClick()}\n        className={[\n          styles.MovieItem,\n          selected ? styles.selected : undefined\n        ].join(\" \")}\n      >\n        <img\n          crossOrigin=\"\"\n          alt={title}\n          className={styles.poster}\n          src={posterUrl}\n        />\n        <div className={styles.title}>{title}</div>\n      </div>\n    );\n  }\n);\n\nexport default Thumbnail;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"star-empty\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  className: \"path1\",\n  d: \"M1024 397.050l-353.78-51.408-158.22-320.582-158.216 320.582-353.784 51.408 256 249.538-60.432 352.352 316.432-166.358 316.432 166.358-60.434-352.352 256.002-249.538zM512 753.498l-223.462 117.48 42.676-248.83-180.786-176.222 249.84-36.304 111.732-226.396 111.736 226.396 249.836 36.304-180.788 176.222 42.678 248.83-223.462-117.48z\"\n});\n\nvar SvgIconStarEmpty = function SvgIconStarEmpty(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"icon-star-empty\",\n    viewBox: \"0 0 1024 1024\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIconStarEmpty, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/icon-star-empty.8fa0723a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"star-full\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  className: \"path1\",\n  d: \"M1024 397.050l-353.78-51.408-158.22-320.582-158.216 320.582-353.784 51.408 256 249.538-60.432 352.352 316.432-166.358 316.432 166.358-60.434-352.352 256.002-249.538z\"\n});\n\nvar SvgIconStarFull = function SvgIconStarFull(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"icon-star-full\",\n    viewBox: \"0 0 1024 1024\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIconStarFull, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/icon-star-full.19a53276.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport styles from \"./RatingText.module.scss\";\nimport Rating from \"react-rating\";\nimport { ReactComponent as StarEmpty } from \"./icon-star-empty.svg\";\nimport { ReactComponent as StarFull } from \"./icon-star-full.svg\";\n\ntype RatingTextProps = {\n  className?: string;\n  rating?: number;\n  readonly: boolean;\n  scale: number;\n  label: string;\n  onRated?: (rating: number) => void;\n};\n\nconst RatingText: React.FC<RatingTextProps> = props => {\n  return (\n    <div className={[styles.RatingText, props.className].join(\" \")}>\n      <label className={styles.label}>{props.label}</label>\n      <Rating\n        className={styles.rating}\n        initialRating={props.rating ? props.rating / 2 : undefined}\n        readonly={props.readonly}\n        emptySymbol={<StarEmpty className={styles.star} />}\n        fullSymbol={<StarFull className={styles.star} />}\n        fractions={2}\n        stop={props.scale / 2}\n        onChange={(rate: number) => {\n          props.onRated && props.onRated(rate * 2);\n        }}\n      />\n      <span className={styles.text}>\n        <b>{props.rating}</b>/{props.scale}\n      </span>\n    </div>\n  );\n};\n\nexport default RatingText;\n","import React from \"react\";\nimport styles from \"./Overview.module.scss\";\nimport RatingText from \"./RatingText\";\n\ntype OverviewProps = {\n  title: string;\n  posterUrl?: string;\n  directors?: string[];\n  genres?: string[];\n  rating?: number;\n  totalRatings?: number;\n  userRating?: number;\n  synopsis?: string;\n  inWatchlist?: boolean;\n  onAddToWatchlist?: () => void;\n  onRemoveFromWatchlist?: () => void;\n  onRating?: (rating: number) => void;\n};\n\nconst Overview: React.FC<OverviewProps> = props => {\n  const {\n    genres,\n    directors,\n    title,\n    posterUrl,\n    synopsis,\n    inWatchlist,\n    onAddToWatchlist,\n    onRemoveFromWatchlist,\n    onRating\n  } = props;\n\n  return (\n    <div className={styles.Overview}>\n      <div className={styles.columnLeft}>\n        <img\n          crossOrigin=\"\"\n          alt={props.title}\n          className={styles.poster}\n          src={posterUrl}\n        />\n      </div>\n      <div>\n        {genres && <div className={styles.genres}>{genres.join(\", \")}</div>}\n        <h2 className={styles.title}>{title}</h2>\n        {directors && (\n          <div className={styles.directors}>\n            Directed by {directors.join(\", \")}\n          </div>\n        )}\n        <div className={styles.ratings}>\n          {!!props.totalRatings && props.totalRatings > 0 && (\n            <RatingText\n              className={styles.rating}\n              label=\"Rating\"\n              readonly={true}\n              rating={props.rating}\n              scale={10}\n            />\n          )}\n\n          <RatingText\n            className={styles.rating}\n            label=\"Your rating\"\n            readonly={false}\n            rating={props.userRating}\n            scale={10}\n            onRated={(rate: number) => onRating && onRating(rate)}\n          />\n        </div>\n        {synopsis && <p className={styles.synopsis}>{synopsis}</p>}\n        {inWatchlist === false && (\n          <button\n            className={styles.addToWatchlist}\n            onClick={() => onAddToWatchlist && onAddToWatchlist()}\n          >\n            Add to watchlist\n          </button>\n        )}\n        {inWatchlist === true && (\n          <button\n            className={styles.addToWatchlist}\n            onClick={() => onRemoveFromWatchlist && onRemoveFromWatchlist()}\n          >\n            Remove from watchlist\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Overview;\n","import React from \"react\";\nimport {\n  addWatchlistRequest,\n  removeWatchlistRequest,\n  ratingRequest\n} from \"../../domain/MoviesDetailsSlice\";\nimport { Movie } from \"domain/types\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { RootState } from \"store\";\nimport Overview from \"./Overview\";\n\ntype OverviewConnectedProps = {\n  movie: Movie;\n};\n\nconst OverviewConnected: React.FC<OverviewConnectedProps> = props => {\n  const { movie } = props;\n\n  const dispatch = useDispatch();\n  const movieDetails = useSelector(\n    (state: RootState) => state.moviesDetails.moviesDetails[movie.id]\n  );\n\n  if (!movieDetails) {\n    return <Overview title={movie.title} posterUrl={movie.poster} />;\n  }\n\n  return (\n    <Overview\n      title={movie.title}\n      posterUrl={movie.poster}\n      directors={movieDetails.directors}\n      genres={movieDetails.genres}\n      rating={movieDetails.rating}\n      totalRatings={movieDetails.totalRatings}\n      userRating={movieDetails.userRating}\n      synopsis={movieDetails.synopsis}\n      inWatchlist={!!movieDetails.inWatchlist}\n      onAddToWatchlist={() => dispatch(addWatchlistRequest({ id: movie.id }))}\n      onRemoveFromWatchlist={() =>\n        dispatch(removeWatchlistRequest({ id: movie.id }))\n      }\n      onRating={rating => dispatch(ratingRequest({ id: movie.id, rating }))}\n    />\n  );\n};\n\nexport default OverviewConnected;\n","import React from \"react\";\nimport styles from \"./Related.module.scss\";\nimport { Movie } from \"domain/types\";\nimport Thumbnail from \"components/thumbnail/Thumbnail\";\n\ntype RelatedProps = {\n  movies?: Movie[];\n};\n\nconst Related: React.FC<RelatedProps> = props => {\n  const { movies } = props;\n\n  return (\n    <div className={styles.Related}>\n      {movies &&\n        movies.map(movie => (\n          <div key={movie.id} className={styles.item}>\n            <Thumbnail\n              selected={false}\n              title={movie.title}\n              posterUrl={movie.poster}\n            />\n          </div>\n        ))}\n    </div>\n  );\n};\n\nexport default Related;\n","import React from \"react\";\nimport { Movie } from \"domain/types\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"store\";\nimport Related from \"./Related\";\n\ntype RelatedConnectedProps = {\n  movie: Movie;\n};\n\nconst RelatedConnected: React.FC<RelatedConnectedProps> = props => {\n  const { movie } = props;\n\n  const movieDetails = useSelector(\n    (state: RootState) => state.moviesDetails.moviesDetails[movie.id]\n  );\n\n  return <Related movies={movieDetails ? movieDetails.related : undefined} />;\n};\n\nexport default RelatedConnected;\n","import React, { useState, useEffect } from \"react\";\nimport styles from \"./Details.module.scss\";\nimport { Tab, Tabs, TabList, TabPanel } from \"react-tabs\";\nimport { Movie, MovieDetails } from \"domain/types\";\nimport Overview from \"./Overview.connected\";\nimport Related from \"./Related.connected\";\n\ntype DetailsProps = {\n  movie: Movie;\n  movieDetails?: MovieDetails;\n  onTabChange?: () => void;\n};\n\nconst Details = React.forwardRef<HTMLDivElement, DetailsProps>(function Details(\n  props,\n  ref\n) {\n  const { movie, onTabChange } = props;\n\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  useEffect(() => onTabChange && onTabChange(), [selectedIndex]);\n\n  return (\n    <article ref={ref} className={styles.Details}>\n      <Tabs\n        selectedIndex={selectedIndex}\n        onSelect={tabIndex => setSelectedIndex(tabIndex)}\n      >\n        <TabList className={styles.tabList}>\n          <Tab selectedClassName={styles.tabSelected}>Overview</Tab>\n          <Tab selectedClassName={styles.tabSelected}>Related Movies</Tab>\n        </TabList>\n\n        <TabPanel>\n          <Overview movie={movie} />\n        </TabPanel>\n        <TabPanel>\n          <Related movie={movie} />\n        </TabPanel>\n      </Tabs>\n    </article>\n  );\n});\n\nexport default Details;\n","import React, { useEffect } from \"react\";\nimport styles from \"./Grid.module.scss\";\nimport Thumbnail from \"../thumbnail/Thumbnail\";\nimport Details from \"../details/Details\";\nimport { Movie } from \"domain/types\";\n\ntype GridItemProps = {\n  movie: Movie;\n  showDetails: boolean;\n  onMovieSelected: (movieId?: string) => void;\n};\n\nconst GridItem: React.FC<GridItemProps> = (props: GridItemProps) => {\n  const { movie, showDetails, onMovieSelected } = props;\n\n  const detailsRef = React.createRef<HTMLDivElement>();\n  const itemRef = React.createRef<HTMLLIElement>();\n\n  function extendDetails() {\n    if (itemRef.current) {\n      const paddingBottom =\n        showDetails && detailsRef.current\n          ? `${detailsRef.current.offsetHeight}px`\n          : `10px`;\n      itemRef.current.style.paddingBottom = paddingBottom;\n    }\n  }\n  useEffect(extendDetails, [showDetails]);\n\n  return (\n    <li className={styles.item} ref={itemRef}>\n      <Thumbnail\n        title={movie.title}\n        selected={showDetails}\n        posterUrl={movie.poster}\n        onClick={() => onMovieSelected(showDetails ? undefined : movie.id)}\n      />\n      {showDetails && (\n        <div className={styles.detailsWrapper}>\n          <Details\n            ref={detailsRef}\n            movie={movie}\n            onTabChange={() => extendDetails()}\n          />\n        </div>\n      )}\n    </li>\n  );\n};\n\nexport default GridItem;\n","import React from \"react\";\nimport ContentLoader from \"react-content-loader\";\nimport styles from \"./Grid.module.scss\";\n\nconst ItemPlaceholder: React.FC = () => (\n  <li className={styles.item}>\n    <ContentLoader\n      speed={2}\n      width={190}\n      height={326}\n      viewBox=\"0 0 190 326\"\n      backgroundColor=\"#2e2e2e\"\n      foregroundColor=\"#363636\"\n    >\n      <rect x=\"0\" y=\"316\" rx=\"5\" ry=\"5\" width=\"150\" height=\"10\" />\n      <rect x=\"0\" y=\"0\" rx=\"3\" ry=\"5\" width=\"190\" height=\"282\" />\n    </ContentLoader>\n  </li>\n);\n\nexport default ItemPlaceholder;\n","import React, { useEffect } from \"react\";\nimport styles from \"./Grid.module.scss\";\nimport Item from \"./Item\";\nimport ItemPlaceholder from \"./ItemPlaceholder\";\nimport { Movie } from \"domain/types\";\n\ntype GridProps = {\n  initializing: boolean;\n  moviesFetching: boolean;\n  movies: Movie[];\n  totalPages?: number;\n  currentPage?: number;\n  selectedMovieId?: string;\n  onNextPage: () => void;\n  onItemSelected: (movieId: string | undefined) => void;\n};\n\nconst Grid: React.FC<GridProps> = props => {\n  const {\n    initializing,\n    movies,\n    totalPages,\n    currentPage,\n    moviesFetching,\n    selectedMovieId,\n    onNextPage,\n    onItemSelected\n  } = props;\n\n  useEffect(\n    function scrollToNextPage() {\n      const isScrollAtBottom = () =>\n        window.innerHeight + window.scrollY >= document.body.offsetHeight;\n\n      const onScroll = () => {\n        if (\n          isScrollAtBottom() &&\n          !moviesFetching &&\n          currentPage &&\n          totalPages &&\n          currentPage < totalPages\n        ) {\n          onNextPage();\n        }\n      };\n\n      window.addEventListener(\"scroll\", onScroll, { passive: true });\n\n      return () => {\n        window.removeEventListener(\"scroll\", onScroll);\n      };\n    },\n    [moviesFetching, totalPages, currentPage]\n  );\n\n  return (\n    <ul className={styles.Grid}>\n      {!initializing &&\n        movies &&\n        Object.values(movies).map(movie => {\n          return (\n            <Item\n              key={movie.id}\n              movie={movie}\n              onMovieSelected={movieId => onItemSelected(movieId)}\n              showDetails={selectedMovieId === movie.id}\n            />\n          );\n        })}\n      {(moviesFetching || initializing) &&\n        [0, 1, 2, 3, 4].map(i => (\n          <ItemPlaceholder key={`item-placeholder-${i}`} />\n        ))}\n    </ul>\n  );\n};\n\nexport default Grid;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"store\";\nimport Grid from \"./Grid\";\nimport { nextPage } from \"domain/MoviesSlice\";\nimport { showMovieDetails } from \"domain/GridSlice\";\n\nconst GridConnected: React.FC = () => {\n  const dispatch = useDispatch();\n  const {\n    areMoviesFetching,\n    isConfigFetching,\n    movies,\n    currentPage,\n    totalPages\n  } = useSelector((state: RootState) => state.movies);\n  const { selectedMovieId } = useSelector((state: RootState) => state.grid);\n\n  const sortedMovies = Object.values(movies).sort(\n    (a, b) => a.page - b.page || a.indexInPage - b.indexInPage\n  );\n\n  return (\n    <Grid\n      initializing={isConfigFetching}\n      movies={sortedMovies}\n      moviesFetching={areMoviesFetching}\n      currentPage={currentPage}\n      totalPages={totalPages}\n      selectedMovieId={selectedMovieId}\n      onNextPage={() => dispatch(nextPage())}\n      onItemSelected={movieId => dispatch(showMovieDetails(movieId))}\n    />\n  );\n};\n\nexport default GridConnected;\n","import React from \"react\";\nimport styles from \"./Header.module.scss\";\n\nconst Header: React.FC = () => {\n  return (\n    <header className={styles.Header}>\n      <div className={styles.logo}>MovieStar</div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport styles from \"./Error.module.scss\";\n\nconst Error: React.FC = () => {\n  return (\n    <div className={styles.Error}>\n      We&apos;re sorry, an error occured. Please check your internet connection\n      and try again.\n    </div>\n  );\n};\n\nexport default Error;\n","import React from \"react\";\nimport Error from \"./Error\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"store\";\n\nconst ErrorConnected: React.FC = () => {\n  const moviesFetchError = useSelector(\n    (state: RootState) => state.movies.fetchError\n  );\n  const moviesDetailsFetchError = useSelector(\n    (state: RootState) => state.moviesDetails.fetchError\n  );\n  return moviesFetchError || moviesDetailsFetchError ? <Error /> : null;\n};\n\nexport default ErrorConnected;\n","import React from \"react\";\nimport styles from \"./Filter.module.scss\";\nimport { Filter as FilterType } from \"../../domain/types\";\n\ntype FilterProps = {\n  selected: FilterType;\n  onChange: (filter: FilterType) => {};\n};\n\nconst Filter: React.FC<FilterProps> = props => {\n  return (\n    <div className={styles.Filter}>\n      <select\n        className={styles.select}\n        onChange={e => props.onChange(e.target.value as FilterType)}\n        value={props.selected}\n      >\n        <option value=\"popular\">Popular</option>\n        <option value=\"latest\">Latest releases</option>\n        <option value=\"watchlist\">My watchlist</option>\n      </select>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setFilter } from \"../../domain/MoviesSlice\";\nimport Filter from \"./Filter\";\nimport { RootState } from \"store\";\n\nconst FilterConnected: React.FC = () => {\n  const dispatch = useDispatch();\n  const selected = useSelector(\n    (state: RootState) => state.movies.selectedFilter\n  );\n\n  return (\n    <Filter\n      selected={selected}\n      onChange={selected => dispatch(setFilter(selected))}\n    />\n  );\n};\n\nexport default FilterConnected;\n","import React from \"react\";\nimport styles from \"./Welcome.module.scss\";\nimport MayTheForce from \"./undraw_may_the_force.svg\";\n\ntype WelcomeProps = {\n  currentUrl: string;\n  requestToken?: string;\n  sessionId?: string;\n  accountId?: string;\n};\n\nconst Welcome: React.FC<WelcomeProps> = props => (\n  <div className={styles.Welcome}>\n    <img\n      src={MayTheForce}\n      className={styles.mayTheForce}\n      alt=\"May the force be with you !\"\n    />\n    <div className={styles.content}>\n      <h1>Join the force !</h1>\n      <aside>\n        Latest news from your theaters at a glance ! Join MovieStar now,\n        it&apos;s just one step and it&apos;s free.\n      </aside>\n      <form\n        action={`https://www.themoviedb.org/authenticate/${props.requestToken}`}\n      >\n        <input\n          disabled={!props.requestToken || !!props.sessionId}\n          type=\"submit\"\n          value=\"Login with the MovieDB\"\n        />\n        <input type=\"hidden\" name=\"redirect_to\" value={props.currentUrl} />\n      </form>\n    </div>\n  </div>\n);\n\nexport default Welcome;\n","import React, { useEffect } from \"react\";\nimport { useLocation, Redirect } from \"react-router\";\nimport Welcome from \"./Welcome\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  setRequestToken,\n  fetchRequestTokenRequest,\n  fetchAccountIdRequest,\n  fetchSessionIdRequest\n} from \"domain/UserSlice\";\nimport { RootState } from \"store\";\n\nconst WelcomeConnected: React.FC = () => {\n  const dispatch = useDispatch();\n  const { requestToken, sessionId, accountId } = useSelector(\n    (state: RootState) => state.user\n  );\n  const query = new URLSearchParams(useLocation().search);\n\n  useEffect(() => {\n    if (query.get(\"request_token\")) {\n      dispatch(setRequestToken(query.get(\"request_token\") as string));\n    }\n  });\n\n  useEffect(() => {\n    if (!requestToken && !query.get(\"request_token\")) {\n      dispatch(fetchRequestTokenRequest());\n    }\n  }, [requestToken, sessionId]);\n\n  useEffect(() => {\n    if (requestToken && query.get(\"approved\") === \"true\") {\n      dispatch(fetchSessionIdRequest());\n    }\n  }, [requestToken, query.get(\"approved\")]);\n\n  useEffect(() => {\n    if (!!sessionId) {\n      dispatch(fetchAccountIdRequest());\n    }\n  }, [sessionId]);\n\n  if (sessionId && accountId) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <Welcome\n      currentUrl={window.location.href}\n      requestToken={requestToken}\n      sessionId={sessionId}\n      accountId={accountId}\n    />\n  );\n};\n\nexport default WelcomeConnected;\n","import React, { Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Switch, Route, Redirect } from \"react-router\";\nimport { history, RootState } from \"store\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport Grid from \"./components/grid/Grid.connected\";\nimport Header from \"components/header/Header\";\nimport Error from \"components/error/Error.connected\";\nimport Category from \"components/filter/Filter.connected\";\nimport { initRequest } from \"domain/MoviesSlice\";\nimport Welcome from \"components/welcome/Welcome.connected\";\n\ntype AppProps = {\n  initializeApp: () => void;\n  sessionId?: string;\n};\n\nclass App extends React.Component<AppProps> {\n  componentDidMount() {\n    this.props.initializeApp();\n  }\n\n  render() {\n    return (\n      <ConnectedRouter history={history}>\n        <Switch>\n          <Route exact path=\"/welcome\">\n            <Welcome />\n          </Route>\n          <Route>\n            {!this.props.sessionId ? (\n              <Redirect to=\"/welcome\" />\n            ) : (\n              <Fragment>\n                <Header />\n                <Error />\n                <Category />\n                <Grid />\n              </Fragment>\n            )}\n          </Route>\n        </Switch>\n      </ConnectedRouter>\n    );\n  }\n}\n\nconst mapStateToProps = (state: RootState) => ({\n  sessionId: state.user.sessionId\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n  initializeApp: () => dispatch(initRequest())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/* istanbul ignore file */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}